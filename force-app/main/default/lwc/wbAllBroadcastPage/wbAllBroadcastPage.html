<template>
    <template if:false={selectedRecordId}>
        <template if:true={showLicenseError}>
            <c-license-expired-l-w-c onpackageupdate={handlePackageUpdate}></c-license-expired-l-w-c>
        </template>

        <template if:false={showLicenseError}>
            <template if:true={isTemplateVisible}>
                <div class="wrapper">

                    <!-- Spinner -->
                    <template if:true={isLoading}>
                        <div class="spinner-container">
                            <lightning-spinner alternative-text="Loading" size="medium"></lightning-spinner>
                        </div>
                    </template>
                    <template if:true={isBroadCastSelected}>
                        <h1 class="slds-text-align_center heading">Recent Broadcasts</h1>
                    </template>
                    <!-- <template if:false={isBroadCastSelected}>
                        <h1 class="slds-text-align_center heading">Recent Broadcasts Campaigns</h1>
                    </template> -->

                    <div class="filterparent">
                        
                        <div class="search-container">
                            <div class="search-icon">
                                <lightning-icon icon-name="utility:search" size="x-small"></lightning-icon>
                            </div>
                            <input type="search" class="slds-input" name="searchInput" placeholder="Search Name" value={broadcastSearchTerm}
                                onkeyup={handleSearch} />
                        </div>
                        <div class="btns">
                            <button class="custom-button" onclick={newBroadcast}>
                                <span class="icon-container">
                                    <svg focusable="false" aria-hidden="true" viewBox="0 0 520 520" part="icon"
                                        lwc-3220386utb1 data-key="add"
                                        class="slds-icon slds-icon-text-default slds-icon_x-small">
                                        <g lwc-3220386utb1>
                                            <path
                                                d="M300 290h165c8 0 15-7 15-15v-30c0-8-7-15-15-15H300c-6 0-10-4-10-10V55c0-8-7-15-15-15h-30c-8 0-15 7-15 15v165c0 6-4 10-10 10H55c-8 0-15 7-15 15v30c0 8 7 15 15 15h165c6 0 10 4 10 10v165c0 8 7 15 15 15h30c8 0 15-7 15-15V300c0-6 4-10 10-10z"
                                                lwc-3220386utb1></path>
                                        </g>
                                    </svg>
                                </span>
                                <span>New Broadcast</span>
                            </button>
                        </div>
                    </div>

                    <div class="slds-m-around_medium container">
                        <!-- Custom Table -->
                        <template if:true={paginatedData.length}>
                            <table class="table">
                                <thead>
                                    <tr>
                                        <template if:true={isBroadCastSelected}>
                                            <th class="sr-no">No</th>
                                            <th>Name</th>
                                            <th>Recipient Count</th>
                                            <th>Status</th>
                                            <th>Total Sent</th>
                                            <th>Total Delivered</th>
                                            <th>Total Read</th>
                                            <th>Total Failed</th>
                                        </template>
                                    </tr>
                                </thead>
                                <tbody>
                                    <template for:each={paginatedData} for:item="row">
                                        <tr key={row.Id}>
                                            <template if:true={isBroadCastSelected}>
                                                <td class="sr-no">{row.index}</td>
                                                <td>
                                                    <a href="javascript:void(0);" class="clickable-name" data-record-id={row.Id} onclick={handleNameClick}>{row.Name}</a>
                                                </td>
                                                <td>{row.MVWB__Recipient_Count__c}</td>
                                                <td>
                                                    <div>
                                                        {row.MVWB__Status__c}
                                                        <template if:true={row.isPending}>
                                                            <svg class="reschedule-icon" onclick={handleRechedulePopup} data-record-id={row.Id} xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Layer_1" x="0px" y="0px" width="25px" viewBox="0 0 1024 1024" enable-background="new 0 0 1024 1024" xml:space="preserve">
                                                                <path fill="#000000" opacity="1.000000" stroke="none" d=" M771.415405,131.437500   C790.324341,143.805313 799.429871,160.899399 799.401184,183.229279   C799.279602,277.884766 799.415649,372.540649 799.200073,467.195801   C799.185547,473.569641 801.151489,476.825073 806.795166,479.845032   C858.945679,507.750458 894.160645,549.719360 910.717285,606.811829   C914.328308,619.263977 916.693481,631.986328 917.373413,644.975403   C917.460449,646.638550 917.772400,648.210999 919.148987,649.847595   C921.447815,646.211792 923.562744,642.686157 925.854553,639.279480   C930.797607,631.931702 939.545959,629.832275 946.267578,634.286133   C952.711670,638.556152 954.474243,647.465637 949.877502,654.670776   C940.206360,669.829651 930.476196,684.956238 920.456116,699.885254   C913.562317,710.156250 904.808533,711.144958 895.726379,702.948425   C883.978455,692.346313 872.315002,681.646179 860.807129,670.784729   C855.226868,665.518005 854.511719,657.481567 858.532776,651.689636   C863.660767,644.303223 873.115601,643.347046 880.354431,649.554871   C883.197205,651.992737 885.905334,654.587646 889.503723,657.866394   C889.827881,647.022827 888.535400,637.494324 886.459106,628.193359   C872.408752,565.253845 835.397705,521.383972 775.891113,496.702209   C758.260132,489.389343 739.567810,486.567322 720.541931,485.162140   C689.322754,482.856415 659.613464,488.274933 631.168762,501.032166   C608.743713,511.089630 590.085388,526.233154 573.896729,544.499817   C551.661011,569.589661 537.323303,598.653564 530.956726,631.583984   C527.359863,650.188538 527.715332,668.921570 529.149597,687.728027   C531.469604,718.148010 542.731995,745.315552 560.100464,769.806702   C588.416565,809.735107 626.933533,834.875793 675.192261,843.586426   C734.048889,854.209961 786.244446,838.903137 831.571106,800.165344   C844.293274,789.292603 855.129944,776.620361 863.785767,762.212341   C867.310486,756.345215 872.128723,752.465393 879.184204,753.028992   C889.994446,753.892456 895.221924,765.027344 889.377441,774.675781   C880.713318,788.979065 870.375366,801.988525 858.473328,813.767273   C826.871521,845.041565 789.160583,864.845337 745.384277,872.018616   C693.088196,880.587952 643.649902,871.837036 598.217712,843.864929   C573.954651,828.926514 553.748535,809.453735 537.327209,786.193359   C534.241821,781.823059 530.870667,780.280334 525.712585,780.286377   C433.223450,780.395020 340.734192,780.367920 248.244980,780.369263   C216.748657,780.369690 185.233444,781.037903 153.762115,780.150452   C129.705032,779.472046 102.501907,761.948181 97.555489,731.454163   C96.828232,726.970825 96.668190,722.535889 96.668213,718.050232   C96.669083,539.404358 96.654160,360.758514 96.693718,182.112656   C96.701515,146.913193 124.470184,122.654106 156.314484,122.652443   C350.125244,122.642303 543.935974,122.671295 737.746765,122.590759   C749.718628,122.585785 760.756470,125.384071 771.415405,131.437500  M125.349426,462.499908   C125.349541,548.496765 125.339935,634.493652 125.357483,720.490479   C125.361259,738.985779 137.980438,751.646301 156.379898,751.647827   C274.209717,751.657715 392.039551,751.654663 509.869385,751.628601   C511.814026,751.628174 513.864197,752.115479 515.695435,750.962158   C516.297363,749.541199 515.661377,748.313843 515.175720,747.107239   C506.927399,726.612366 502.144257,705.404358 500.420044,683.317078   C498.775482,662.250183 499.632812,641.485413 504.357574,620.920837   C516.323914,568.837158 543.732361,526.878967 586.822021,495.131744   C620.117981,470.600281 657.690735,458.157928 698.638245,455.859283   C721.157959,454.595123 743.439941,457.318604 765.211487,463.580078   C771.537354,465.399353 771.647278,465.229370 771.647522,458.678284   C771.649414,410.013062 771.573792,361.347595 771.743652,312.682983   C771.760925,307.725220 770.551270,306.122101 765.372925,306.125031   C554.212646,306.244385 343.052277,306.219666 131.891907,306.219940   C125.368782,306.219971 125.353355,306.253113 125.352715,313.004303   C125.348015,362.502838 125.350006,412.001343 125.349426,462.499908  M750.499634,276.659576   C755.665161,276.658325 760.844604,276.421936 765.991882,276.727844   C770.353516,276.987091 771.760864,275.465088 771.735107,271.049652   C771.567688,242.388458 771.723999,213.725418 771.573975,185.064041   C771.548096,180.125641 771.281921,175.030685 769.140930,170.413666   C763.191162,157.582886 752.819519,151.414017 738.914795,151.408859   C588.938354,151.353226 438.961914,151.374985 288.985474,151.375381   C244.659103,151.375504 200.332657,151.328110 156.006393,151.397232   C137.605103,151.425919 125.356392,163.826584 125.351120,182.152786   C125.342865,210.814957 125.348488,239.477112 125.348572,268.139282   C125.348602,276.652802 125.349129,276.658295 134.096390,276.658325   C339.230835,276.659302 544.365295,276.658997 750.499634,276.659576  z"/>
                                                                <path fill="#000000" opacity="1.000000" stroke="none" d=" M796.693542,656.984741   C806.468140,657.708069 812.135071,661.720520 813.259705,668.390442   C814.726074,677.087402 808.427063,685.101013 799.115967,685.179932   C769.812134,685.428101 740.503540,685.427490 711.199463,685.191040   C701.059937,685.109253 694.682800,677.992249 694.672668,667.726196   C694.634216,628.595764 694.643677,589.465393 694.673767,550.334961   C694.680298,541.883179 700.458130,535.741028 708.291565,535.657837   C716.849426,535.566956 722.306519,541.127869 722.320679,550.261902   C722.372437,583.730835 722.454529,617.200562 722.235474,650.668091   C722.201660,655.843567 723.830505,657.096741 728.794556,657.044800   C751.271057,656.809631 773.751587,656.965637 796.693542,656.984741  z"/>
                                                                <path fill="#000000" opacity="1.000000" stroke="none" d=" M242.000000,496.883698   C231.166748,496.880585 220.832474,496.969269 210.500473,496.854279   C195.672623,496.689270 188.899979,489.800446 188.888092,475.019989   C188.865295,446.686829 189.055359,418.351898 188.778961,390.021362   C188.658875,377.712982 196.217422,369.165131 209.374481,369.445282   C239.360718,370.083893 269.369812,369.638611 299.369629,369.654907   C310.600342,369.660980 317.329010,376.404816 317.338562,387.715576   C317.363647,417.382080 317.346863,447.048553 317.345581,476.715057   C317.345001,490.024963 311.002686,496.674225 297.499023,496.852081   C281.502014,497.062805 265.499939,496.890930 249.500076,496.885132   C247.166718,496.884277 244.833359,496.884674 242.000000,496.883698  M289.651550,416.501221   C289.648865,411.674744 289.512085,406.843323 289.688965,402.023438   C289.814423,398.604736 288.555969,397.306458 285.061096,397.323395   C264.091370,397.425140 243.120575,397.427429 222.151016,397.307587   C218.391769,397.286102 217.280869,398.763672 217.300354,402.352478   C217.411484,422.822784 217.415985,443.294403 217.294128,463.764618   C217.272263,467.438660 218.524689,468.728607 222.216858,468.707489   C243.019958,468.588440 263.824677,468.571960 284.627350,468.724854   C288.651245,468.754395 289.751038,467.240295 289.712677,463.434967   C289.558136,448.124939 289.650208,432.812408 289.651550,416.501221  z"/>
                                                                <path fill="#000000" opacity="1.000000" stroke="none" d=" M308.079407,562.516907   C314.827972,565.906372 317.317841,571.425598 317.327576,578.226318   C317.371826,609.052002 317.381592,639.877808 317.326019,670.703430   C317.307434,681.008606 310.015228,688.304260 299.680847,688.327515   C269.188538,688.396301 238.695984,688.382935 208.203552,688.361511   C196.665985,688.353394 189.126099,681.678955 189.006393,670.016479   C188.693481,639.527588 188.706207,609.030701 189.047043,578.542175   C189.176422,566.969360 196.446259,560.671692 208.037811,560.664307   C238.363647,560.644958 268.689545,560.673706 299.015320,560.630554   C302.065582,560.626221 304.988098,560.919006 308.079407,562.516907  M233.503571,660.658752   C250.487137,660.657776 267.470947,660.608093 284.454071,660.697632   C287.789581,660.715210 289.736023,660.129456 289.709656,656.098022   C289.571259,634.952759 289.602081,613.805908 289.683533,592.660095   C289.696167,589.378357 288.367706,588.303406 285.210083,588.314636   C264.064178,588.389648 242.917801,588.383789 221.771835,588.319153   C218.620239,588.309509 217.303207,589.438843 217.315979,592.708740   C217.399261,614.021057 217.391876,635.334045 217.318314,656.646484   C217.307693,659.721619 218.583496,660.787781 221.518188,660.680786   C225.176315,660.547302 228.843216,660.654724 233.503571,660.658752  z"/>
                                                                <path fill="#000000" opacity="1.000000" stroke="none" d=" M512.329956,444.000061   C512.329956,455.991974 512.365540,467.484039 512.318542,478.975739   C512.279724,488.478088 506.624298,495.054260 497.306854,496.560699   C496.322998,496.719788 495.326447,496.906647 494.336182,496.904236   C464.026947,496.830688 433.715302,496.930206 403.409821,496.545197   C391.559601,496.394653 385.663635,489.645630 385.657196,477.753052   C385.640930,447.774200 385.637085,417.795349 385.658966,387.816498   C385.667419,376.226410 392.325684,369.650513 403.971313,369.648651   C434.283264,369.643829 464.595215,369.638062 494.907166,369.654419   C505.657837,369.660217 512.312988,376.301025 512.325928,387.039948   C512.348694,405.859955 512.330750,424.680023 512.329956,444.000061  M484.663361,432.500061   C484.660522,422.342651 484.570160,412.184113 484.703461,402.028503   C484.748535,398.595612 483.499481,397.311646 480.036316,397.328278   C459.388977,397.427368 438.740509,397.443329 418.093384,397.324280   C414.315247,397.302490 413.203094,398.826538 413.220123,402.381836   C413.318237,422.862701 413.342072,443.344696 413.209442,463.825134   C413.185425,467.539062 414.435547,468.735474 418.121277,468.711700   C438.601746,468.579620 459.084076,468.571198 479.564362,468.716583   C483.524414,468.744690 484.796631,467.339966 484.722107,463.471497   C484.529694,453.484375 484.660919,443.490967 484.663361,432.500061  z"/>
                                                                <path fill="#000000" opacity="1.000000" stroke="none" d=" M481.486969,564.487061   C486.217712,569.631348 486.668976,575.379883 484.153503,581.000916   C481.547760,586.823608 476.151093,588.426819 470.021454,588.389771   C453.024719,588.286926 436.025848,588.459717 419.030487,588.274780   C414.873444,588.229553 413.106659,589.158325 413.158661,593.779480   C413.389313,614.273743 413.359283,634.772644 413.200195,655.268127   C413.168488,659.353149 414.363800,660.792175 418.573242,660.732544   C433.401215,660.522461 448.234131,660.635254 463.065063,660.670715   C471.887207,660.691833 477.259613,665.658142 477.347626,673.763733   C477.443604,682.600403 472.235870,688.231689 463.285400,688.298584   C442.956390,688.450562 422.625061,688.434753 402.295624,688.321777   C393.269409,688.271667 385.798157,680.993774 385.742401,671.665161   C385.551239,639.671326 385.581329,607.675354 385.728302,575.681091   C385.764221,567.861267 393.148804,560.756165 401.063141,560.713013   C424.558746,560.584778 448.055511,560.680298 471.551819,560.661621   C475.233246,560.658691 478.325836,562.117615 481.486969,564.487061  z"/>
                                                                <path fill="#000000" opacity="1.000000" stroke="none" d=" M640.999878,397.369385   C631.509033,397.369354 622.509644,397.601318 613.530762,397.273529   C608.843628,397.102417 607.100952,398.363983 607.223267,403.340302   C607.546448,416.485657 607.342773,429.644226 607.328003,442.797516   C607.317810,451.857727 602.389404,457.844025 594.580811,458.334412   C586.195923,458.860962 579.353577,453.764282 579.189209,444.924713   C578.815002,424.811249 577.898865,404.644043 579.696228,384.565338   C580.554993,374.972168 587.364380,369.651367 597.025330,369.648651   C627.327881,369.640106 657.630432,369.637939 687.932983,369.660339   C698.913452,369.668457 705.301208,376.029144 705.334473,386.974304   C705.369934,398.629028 705.359192,410.283966 705.336365,421.938782   C705.319641,430.449524 699.654297,437.032623 692.197815,437.275574   C684.845215,437.515167 677.998840,430.573547 677.727966,422.277374   C677.521667,415.957214 677.456543,409.613708 677.764526,403.301849   C677.980896,398.868378 676.790039,397.083496 671.965027,397.256531   C661.821716,397.620331 651.656311,397.368347 640.999878,397.369385  z"/>
                                                                <path fill="#000000" opacity="1.000000" stroke="none" d=" M413.318359,236.459930   C403.993561,216.777618 408.763489,194.856628 425.552704,184.337524   C449.887634,169.090759 482.811859,179.048492 488.754852,209.135956   C493.375244,232.527481 480.728333,253.565399 458.977783,257.580383   C441.061371,260.887634 426.885406,257.871765 413.318359,236.459930  M438.041016,224.270279   C439.668549,226.944763 442.067474,228.685730 444.922668,229.812225   C449.740906,231.713226 454.259613,230.884308 457.871887,227.349747   C461.415894,223.882019 463.841370,219.797516 461.959290,214.372696   C459.325104,206.780151 452.095764,202.829254 445.094635,205.353409   C437.279388,208.171082 434.415894,215.203308 438.041016,224.270279  z"/>
                                                                <path fill="#000000" opacity="1.000000" stroke="none" d=" M290.436859,232.122833   C283.388977,249.226669 264.745728,259.679443 245.653030,257.198242   C232.360703,255.470840 215.639053,242.932343 212.375687,224.378677   C208.045486,199.759384 225.899536,180.301376 246.832184,177.538452   C269.260834,174.578064 288.779144,188.113251 292.999847,210.244110   C294.380127,217.481644 293.451874,224.815460 290.436859,232.122833  M241.539291,211.290634   C240.082718,213.709396 240.193527,216.390244 240.345978,219.039474   C240.619553,223.793259 244.506439,228.176025 249.900055,229.965683   C254.558182,231.511276 259.712372,229.971375 263.208435,225.659119   C266.423553,221.693390 267.901062,217.351959 265.374237,212.309418   C260.435120,202.452896 249.210663,201.616882 241.539291,211.290634  z"/>
                                                                <path fill="#000000" opacity="1.000000" stroke="none" d=" M685.347900,217.948090   C685.248047,238.417114 667.766479,255.936859 647.774536,256.373474   C624.851990,256.874115 611.303284,246.435745 605.774841,225.623489   C598.256897,197.321350 621.584045,173.021072 648.854492,176.190826   C670.599121,178.718292 685.337524,195.451874 685.347900,217.948090  M654.724182,225.209427   C655.456421,224.113052 656.331421,223.085236 656.896301,221.908493   C659.425537,216.639557 658.692383,211.993805 654.783997,207.809860   C650.835205,203.582642 645.422302,202.338486 640.322937,204.486008   C634.784729,206.818359 631.896362,211.057480 632.059753,216.828949   C632.217529,222.398529 635.295837,226.072144 640.068726,228.452042   C645.428284,231.124496 649.999573,229.243896 654.724182,225.209427  z"/>
                                                            </svg>
                                                        </template>
                                                    </div>
                                                </td>
                                                <td>{row.MVWB__Total_Sent__c}</td>
                                                <td>{row.MVWB__Total_Delivered__c}</td>
                                                <td>{row.MVWB__Total_Read__c}</td>
                                                <td>{row.MVWB__Total_Failed__c}</td>
                                            </template>
                                        </tr>
                                    </template>
                                </tbody>
                            </table>
                        </template>

                        <!-- No Records Message -->
                        <template if:true={showNoRecordsMessage}>
                            <div class="no-records-message">
                                <div class="empty-state">
                                    <div class="empty-state__content">
                                        <div class="empty-state__icon">
                                            <img src="/resource/MVWB__emptyState" alt="" draggable="false">
                                        </div>
                                        <div class="empty-state__message">No data available to show</div>
                                    </div>
                                </div>
                            </div>
                        </template>
                    </div>

                    <template if:true={paginatedData.length}>
                        <div class="pagination-container">
                            <button class="pagination-button" disabled={isFirstPage} onclick={handlePrevious}>
                                <svg xmlns="http://www.w3.org/2000/svg" height="52" width="52" viewBox="0 0 520 520" fill="#fff">
                                    <path
                                        d="M342 477 134 272c-6-6-6-16 0-22L342 45c6-6 16-6 22 0l22 22c6 6 6 16 0 22L221 250c-6 6-6 16 0 22l163 161c6 6 6 16 0 22l-22 22c-5 5-14 5-20 0z" />
                                </svg>
                                Previous
                            </button>

                            <template for:each={pageNumbers} for:item="page">
                                <template if:false={page.isEllipsis}>
                                    <button key={page.number} data-id={page.number} class={page.className}
                                        onclick={handlePageChange}>
                                        {page.number}
                                    </button>
                                </template>
                                <template if:true={page.isEllipsis}>
                                    <span key={page.number} class="pagination-ellipsis">...</span>
                                </template>
                            </template>

                            <button class="pagination-button" disabled={isLastPage} onclick={handleNext}>
                                Next
                                <svg xmlns="http://www.w3.org/2000/svg" height="52" width="52" viewBox="0 0 520 520" fill="#fff">
                                    <path
                                        d="m179 44 207 205c6 6 6 16 0 22L179 476c-6 6-16 6-22 0l-22-22c-6-6-6-16 0-22l163-161c6-6 6-16 0-22L136 88c-6-6-6-16 0-22l22-22c6-5 15-5 21 0z" />
                                </svg>
                            </button>
                        </div>
                    </template>

                    <template if:true={showPopup}>
                        <section role="dialog" tabindex="-1" aria-labelledby="modal-heading-01" aria-modal="true"
                            aria-describedby="modal-content-id-1" class="slds-modal slds-fade-in-open">
                            <div class="slds-modal__container" style="width: 100rem !important;">

                                <!-- Close Button -->
                                <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse"
                                    title="Close" onclick={handleCloseOnPopup}>
                                    <lightning-icon icon-name="utility:close" alternative-text="Close"
                                        size="small"></lightning-icon>
                                </button>

                                <div class="slds-modal__content slds-p-around_medium pop-up" id="modal-content-id-2">
                                    <div class="pop-heading">
                                        {popupHeader}
                                    </div>
                                    <template if:true={popUpFirstPage}>
                                        <div class="popUpBody slds-p-around--medium">
                                            <!-- Header Section: Search and Create New Group Button -->
                                            <div class="slds-m-bottom_medium">
                                                <div class="slds-grid slds-gutters">
                                                    <div class="slds-col slds-size_8-of-12">
                                                        <lightning-input type="search" variant="label-hidden"
                                                            placeholder="Search by Name..." onchange={handleSearchPopup} value={broadcastGroupSearchTerm}>
                                                        </lightning-input>
                                                    </div>
                                                </div>
                                            </div>

                                            <!-- Groups List -->
                                            <div class="box-container">
                                                <template if:true={filteredGroups.length}>
                                                    <template for:each={filteredGroups} for:item="group">
                                                        <div key={group.Id} class="">
                                                            <div class="box-data">
                                                                <div>
                                                                    <lightning-input type="checkbox" label="Select"
                                                                        variant="label-hidden" data-id={group.Id}
                                                                        onchange={handleGroupSelection} checked={group.IsChecked}>
                                                                    </lightning-input>
                                                                </div>
                                                                <div class="">
                                                                    <h3 class="slds-text-heading_small">{group.Name}</h3>
                                                                    <p><strong>Members:</strong> {group.MVWB__Count_of_Members__c}</p>
                                                                    <p><strong>Object of Group Members: </strong>
                                                                        {group.MVWB__Object_Name__c}</p>
                                                                    <p><strong>Description:</strong> {group.MVWB__Description__c}</p>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </template>
                                                </template>
                                            </div>

                                            <template if:true={filteredGroups.length}>
                                                <div class="popUpFooter slds-text-align--center">
                                                    <lightning-button variant="brand-outline" onclick={handleCloseOnPopup}
                                                        label="Close" class="slds-m-left_x-small"></lightning-button>
                                                    <lightning-button variant="brand" label="Next" onclick={handleNextOnPopup}
                                                        class="slds-m-left_x-small" disabled={isNextDisabled}></lightning-button>
                                                </div>
                                            </template>

                                            <template if:false={filteredGroups.length}>
                                                <div class="empty-state__content">
                                                    <div class="empty-state__icon">
                                                        <img src="/resource/MVWB__emptyState" alt="" draggable="false">
                                                    </div>
                                                    <div class="empty-state__message">No data available to show</div>
                                                </div>
                                            </template>
                                        </div>
                                    </template>
                                    <template if:true={popUpSecondpage}>
                                        <div class="popUpBody flexBox slds-p-around--large">
                                            <div class="selectTemplateDiv">
                                                <lightning-combobox name="template" label="Select Template"
                                                    options={templateOptions} onchange={handleInputChange} value={selectedTemplate}
                                                    required message-when-value-missing=" " class="slds-m-bottom_medium">
                                                </lightning-combobox>
                                            </div>
                                            <div class="templatePreviewDiv">
                                                <template if:true={selectedTemplate}>
                                                    <div class="previewOuterBox">
                                                        <div class="previewInnerBox">
                                                            <div class="slds-box slds-theme_default chatBoxBg">
                                                                <template if:true={IsHeaderText}>
                                                                    <div class="TextHeadingWP">
                                                                        <lightning-formatted-rich-text value={tempHeader}></lightning-formatted-rich-text>
                                                                    </div>
                                                                </template>
                                                                <template if:true={isImgSelected}>
                                                                    <div>
                                                                        <img src={tempHeader} alt="File Preview" style="max-width: 100%; height: auto;" />
                                                                    </div>
                                                                </template>
                                                                <template if:true={isVidSelected}>
                                                                    <div class="videoPreview">
                                                                        <video width="100%" height="100%" controls>
                                                                            <source src={tempHeader} type="video/mp4">
                                                                            Your browser does not support the video tag.
                                                                        </video>
                                                                    </div>
                                                                </template>
                                                                <template if:true={isDocSelected}>
                                                                    <div class="imagedivWP" style="position: relative;">
                                                                        <img src={NoPreviewAvailableImg} alt="no preview available">
                                                                    </div>
                                                                </template>
                                                                
                                                                <div class="TextBodyWP">
                                                                    <lightning-formatted-rich-text value={formatedTempBody}></lightning-formatted-rich-text>
                                                                </div>
                                                    
                                                                <div class="textfooterWP">
                                                                    <p class="pfooterWP">{tempFooter}</p>
                                                                </div>
                                                                <div class="TextTimeWP">
                                                                    <p class="timefooterWP">11:59</p>
                                                                </div>
                                                            </div>
                                                            <template if:true={buttonList}>
                                                                <template for:each={buttonList} for:item="button" for:index="index">
                                                                    <div key={button.id} class="button-label-preview">
                                                                        <lightning-icon 
                                                                        icon-name={button.iconName} 
                                                                        size="x-small" 
                                                                        class="button-icon">
                                                                    </lightning-icon>                                    
                                                                        <p>{button.btntext}</p>
                                                                    </div>
                                                                </template>
                                                            </template>
                                                        </div>
                                                    </div> 
                                                </template>
                                                <template if:false={selectedTemplate}>
                                                    <p class="noPreviewText">Please select a template to preview.</p>
                                                </template>
                                            </div>
                                        </div>
                                        <div class="popUpFooter slds-text-align--center slds-p-bottom--large">
                                            <lightning-button variant="brand-outline" onclick={handlePreviousOnPopup}
                                                label="Previous" class="slds-m-left_x-small"></lightning-button>
                                            <lightning-button variant="brand" label="Send" onclick={handleSendOnPopup}
                                                class="slds-m-left_x-small"></lightning-button>
                                            <lightning-button variant="brand" label="Schedule" onclick={handleSchedulePopup}
                                                class="slds-m-left_x-small"></lightning-button>
                                        </div>
                                    </template>
                                    <template if:true={popUpLastPage}>
                                        <div class="slds-grid slds-grid_vertical-align-center slds-grid_align-center slds-m-around_medium">
                                            <lightning-input type="datetime-local" name="dateTime" value={selectedDateTime} onchange={handleInputChange} class="slds-align_absolute-center"></lightning-input>
                                        </div>

                                        <div class="popUpFooter slds-text-align_center slds-p-bottom_large">
                                            <lightning-button variant="brand-outline" onclick={handlePreviousLastpage} label="Previous" class="slds-m-left_x-small"></lightning-button>
                                            
                                            <lightning-button variant="brand" label="Schedule and Send" onclick={handleSchedule} class="slds-m-left_x-small"></lightning-button>
                                        </div>
                                    </template>
                                </div>
                            </div>
                        </section>
                        <div class="slds-backdrop slds-backdrop_open"></div>
                    </template>
                    <template if:true={showReschedulePopup}>
                        <section role="dialog" tabindex="-1" aria-labelledby="modal-heading-01" aria-modal="true"
                            aria-describedby="modal-content-id-1" class="slds-modal slds-fade-in-open">
                            <div class="slds-modal__container" style="width: 100rem !important;">

                                <!-- Close Button -->
                                <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse"
                                    title="Close" onclick={handleCloseReschedulePopup}>
                                    <lightning-icon icon-name="utility:close" alternative-text="Close"
                                        size="small"></lightning-icon>
                                </button>

                                <div class="slds-modal__content slds-p-around_medium pop-up" id="modal-content-id-3">
                                    <div class="pop-heading">
                                        Reschedule Broadcast
                                    </div>
                                    <div class="slds-grid slds-grid_vertical-align-center slds-grid_align-center slds-m-around_medium">
                                        <lightning-input type="datetime-local" name="dateTime" value={selectedDateTime} onchange={handleInputChange} class="slds-align_absolute-center"></lightning-input>
                                    </div>

                                    <div class="popUpFooter slds-text-align_center slds-p-bottom_large">
                                        <lightning-button variant="destructive-text" class="slds-m-left_x-small" label="Delete Broadcast" onclick={handleReschedule}></lightning-button>
                                        <lightning-button variant="brand" class="slds-m-left_x-small" label="Reschedule" onclick={handleReschedule}></lightning-button>
                                    </div>
                                </div>
                            </div>
                        </section>
                        <div class="slds-backdrop slds-backdrop_open"></div>
                    </template>
                </div>
            </template>
        </template>
    </template>
    <template if:true={selectedRecordId}>
        <c-broadcast-report-comp record-id={selectedRecordId}></c-broadcast-report-comp>
    </template>
</template>